var booksCache={},bookApp=angular.module("booksModule",["ngRoute"]).config(function(o){o.when("/home",{templateUrl:"tpl/home.html",controller:"homeController",pageTitle:"home page"}).when("/about",{templateUrl:"tpl/about.html",controller:"aboutController",pageTitle:"about page"}).when("/contact",{templateUrl:"tpl/contact.html",controller:"contactController",pageTitle:"contact page"}).otherwise({redirectTo:"/home"})}).controller("mainController",function(o,e,t){e.setActive=function(o){for(var e=document.querySelectorAll(".menu ul li a"),t=0;t<e.length;t++)e[t].className="";angular.element(o.target).parent().addClass("active")}}).controller("homeController",function(o,e,t,r){o.title=t.current.$$route.pageTitle,e.sortBooks="+bookName",e.categoyBooks="",r({method:"GET",url:"js/books.json"}).then(function(o){e.books=booksCache=o.data,e.categories=getCategories(e.books)}),e.filterCategoyBooks=function(){for(var o=[],t=0;t<e.categories.length;t++)for(var r=0;r<booksCache.length;r++)e.categories[t]==booksCache[r].bookCategory&&1==e[e.categories[t]]&&o.push(booksCache[r]);console.log(o),e.books=o.length>0?o:booksCache},e.sortByPrice=function(o){e.sortBooks=o;for(var t=document.querySelectorAll("#sort-price-links li a"),r=0;r<t.length;r++)t[r].className="";event.target.className="press-active"}}).controller("aboutController",function(o,e,t){o.title=t.current.$$route.pageTitle}).controller("contactController",function(o,e,t){o.title=t.current.$$route.pageTitle}),getCategories=function(o){for(var e=[],t=0;t<o.length;t++)-1==e.indexOf(o[t].bookCategory)&&e.push(o[t].bookCategory);return e};